(function(e) {
    e.fn.promoTimer = function(g) {
        function h(a, hour) {
            a.split("-");
            var c = new Date;
            a = new Date(a);
			if(hour === false)
			{
				a.setHours(23, 59, 59);
			}
			else
			{
			    hours = hour.split(":");
				a.setHours(hours[0], hours[1], hours[2]);
			}
            c = a.getTime() - c.getTime();
            if (0 > c) return 0;
            c = Math.abs(Math.round(c / 1E3));
            console.log(c);
            return c
        }

        function f(a) {
            var c = a;
            if (0 >= a) return "";
            var b = Math.floor(a / 60),
                d = Math.floor(b / 60),
                e = Math.floor(d / 24),
                d = d - 24 * e,
                b = b - 1440 * e - 60 * d;
            a = a - 86400 * e - 3600 * d - 60 * b;
            10 > d && (d = "0" + d);
            10 > b && (b = "0" + b);
            10 > a && (a = "0" + a);
            return 86400 < c ? '<span class="crono-green">' + e + " d. " + d + " h. " +
                b + " m. " + a + " s.</span>" : 3600 < c ? '<span class="crono-orange">' + d + " h. " + b + " m. " + a + " s.</span>" : '<span class="crono-red">' + b + " m. " + a + " s.</span>"
        }
        e.extend({}, g);
        return this.each(function() {
            var a = this;
			
			var hour = false;
			var hour_attr = $(this).attr('data-hour');

			if (typeof hour_attr !== typeof undefined && hour_attr !== false) {
				hour = hour_attr;
			}
			
            var c = e(a).attr("data-end"), 
                b = h(c, hour);
				
				
				
            if ("0000-00-00" != c && (e(a).html(f(b)), 0 < b)) var d = setInterval(function() {
                b--;
                0 >= b && clearInterval(d);
				
				if(0 >= b)
				{
					e(a).remove();
				}
				else
				{
					e(a).html(f(b));
				}
                
            }, 1E3)
        })
    }
})(jQuery);